/**
 * Copyright (C) 2014 Xillio (support@xillio.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*
* Specification: The result of Subtract-Assign with another subtraction of two numbers equals the original value minus the result of the second subtraction
* Expected: 135, 8
* Input: See below, also includes randomized inputs
*/

use Assert, Math;

/*  
 *  -------------------------------------------
 *  Static Tests
 *  -------------------------------------------
*/

var a = 100;
a -= 10-9-8-7-6-5-4-3-2-1;
Assert.equal(a, 135);

var b = 10;
b -= 4-2-0;
Assert.equal(b, 8);

/*  
 *  -------------------------------------------
 *  Randomized Tests
 *  -------------------------------------------
*/

var randomInitials = generateRandomSequence(500, 20);
var rSubs = generateRandomSequence(10, 5);
var resultRandomSubtractions = rSubs[0] - rSubs[1] - rSubs[2] - rSubs[3] - rSubs[4];


foreach(initial in randomInitials){
    Assert.equal(repeatedSubtraction(initial, rSubs),initial - resultRandomSubtractions);
}

function repeatedSubtraction(initial, subs){
    initial -= subs[0] - subs[1] - subs[2] - subs[3] - subs[4];
    return initial;
}

function generateRandomSequence(max, size){
    var list = [];
    var i = 0;
    while(i < size){
        list[] = Math.random(max*2)-max;
        i++;
    }
    return list;
}