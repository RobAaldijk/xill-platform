/**
 * Copyright (C) 2014 Xillio (support@xillio.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*
* Specification: Getting the length in bytes of a string given a certain encoding MUST return the right length.
* Expected: The correct length in bytes (see dataset)
* Input: See dataset
*/

use String, Assert;

foreach (item in getDataset()) {
    testByteLength(item);
}

function testByteLength(item) {
    Assert.equal(String.byteLength(item[0], item[1]), item[2]);
}

function getDataset() {

    // Each sublist contains: string to test, encoding, expected length.
    return [
        ["", "UTF-8", 0],
        ["foo", "ASCII", 3],
        ["foo", "UTF-8", 3],
        ["foo", "UTF-16", 8],
        ["foo", "UTF-32", 12],
        ["€äåé®þüúíóöáßæ©ñµ", "ASCII", 17],
        ["€äåé®þüúíóöáßæ©ñµ", "UTF-8", 35],
        ["special ©å€é® characters", "ASCII", 24],
        ["special ©å€é® characters", "UTF-8", 30]
    ];
}

